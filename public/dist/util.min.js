var mongoose=require("../db/mongoose"),Indicator=mongoose.Indicator,mpUtils=require("mongoose-bluebird-utils");exports.addIndicator=function(a,b){var c="";a.on("data",function(a){c+=a}),a.on("end",function(){c=JSON.parse(c),mpUtils.findOneP(Indicator,{name:c.name}).then(function(a){if(a)b.send(404,"Indicator Already Exists!");else{c.frequency=1/(c.frequency/6e4)/2;var d=new Indicator(c);mpUtils.saveP(d).then(function(a){b.send(200,a)})}})})},exports.fetchIndicators=function(a,b){mpUtils.findP(Indicator).then(function(a){b.send(200,a)})};