angular.module("phrequency",["colorpicker.module","ui.router"]).config(function(a,b){b.otherwise("/"),a.state("/",{url:"/",views:{inputsView:{templateUrl:"client/templates/createButton.html",controller:"indicatorInputController"},footerView:{templateUrl:"client/templates/footer.html",controller:"indicatorInputController"},indicatorsView:{templateUrl:"client/templates/indicators.html",controller:"indicatorInputController"}}}).state("/create",{url:"/create",views:{inputsView:{templateUrl:"client/templates/inputs.html",controller:"indicatorInputController"},footerView:{templateUrl:"client/templates/footer.html",controller:"indicatorInputController"},indicatorsView:{templateUrl:"client/templates/indicators.html",controller:"indicatorInputController"}}})}).controller("indicatorInputController",["$scope","restful","intervalCreator","$location",function(a,b,c,d){a.intervalSetter=function(b){for(var d=0;d<b.length;d++)c.createInterval(a.changeClass,b[d].frequency,b[d])},a.showInputField=function(a){d.path(a)},a.click=function(c,d,e,f){b.sendIndicator(c,d,e,f).then(function(b){b&&(a.indicators.push(b.data),a.intervalSetter(b.data),a.inputName="",a.inputFrequency="",a.showInputField("/"))})},a.changeClass=function(a){a.class="happening"===a.class?"notHappening":"happening"},a.get=function(){a.indicators=void 0,b.getIndicators().then(function(b){a.indicators=b.data,a.intervalSetter(a.indicators)})},a.get()}]).factory("restful",["$http",function(a){return{sendIndicator:function(b,c,d,e){return a({method:"POST",url:"/submit",data:{name:b,frequency:c,background:d,font:e}}).success(function(a){return console.log("success!",a),a}).error(function(a,b){console.log("error!",a,b)})},getIndicators:function(){return a({method:"GET",url:"/submit"}).success(function(a){return a}).error(function(a,b){console.log("error!",a,b)})}}}]).factory("intervalCreator",["$interval",function(a){return{createInterval:function(b,c,d){return a(function(){b.call(this,d)},c)}}}]);